{% extends 'base.html' %}

{% block title %}Search{% endblock%}

{% block content %}

<form id="search-form">
  Find <input type="text" name="search_string" placeholder="japanese, asian, Tacorea">
  <select name="city">
    <option value="San Francisco">Choose a city</option>
    {% for city in form_cities %}
    <option value="{{ city[0] }}">{{ city[0] }}</option>
    {% endfor %}
  </select>
  <input type="submit" value="Search">
</form>

<p>SEARCH RESULTS:</p>

<p>Restaurants in {{ city }}</p>
<div>
  <form action="/search-results">
  	<input type="hidden" name="price" value="1">
  	<input type="hidden" name="city" value="{{ city }}">
    <input type="hidden" name="search_term" value="{{ search_term }}">
   	<input type="submit" value="$">
  </form>
  <form action="/search-results">
  	<input type="hidden" name="price" value="2">
  	<input type="hidden" name="city" value="{{ city }}">
    <input type="hidden" name="search_term" value="{{ search_term }}">
   	<input type="submit" value="$$">
  </form>
  <form action="/search-results">
  	<input type="hidden" name="price" value="3">
  	<input type="hidden" name="city" value="{{ city }}">
    <input type="hidden" name="search_term" value="{{ search_term }}">
   	<input type="submit" value="$$$">
  </form>
  <form action="/search-results">
  	<input type="hidden" name="price" value="4">
  	<input type="hidden" name="city" value="{{ city }}">
    <input type="hidden" name="search_term" value="{{ search_term }}">
   	<input type="submit" value="$$$$">
  </form>	
</div>

<div class="search-results">
<ul>
  {% if price %}
  {% for result in results.keys() %}
  {% if result.price==price %}
  <li><a href="/details/{{ result }}">{{ results[result].name }} ({{ results[result].price }})</a></li>
  {% endif %}
  {% endfor %}
  {% else %}
  {% for result in results %}
  <li><a href="/details/{{ result }}">{{ results[result].name }} ({{ results[result].price }})</a></li>
  {% endfor %}
  {% endif %}
</ul>
</div>

{% endblock %}